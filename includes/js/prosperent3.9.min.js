(function(){var g=950>jQuery(window).height()?600:750;tinymce.PluginManager.add("prosperent",function(a,f){function h(a){return a.replace(/\[(createLink|linker|prosper_store|prosper_search|prosperInsert|contentInsert|compare) ?([^\]]*)?\](.+)?\[\/(createLink|linker|prosper_store|prosper_search|prosperInsert|contentInsert|compare)\]?/g,function(a,b,d,e){a=window.encodeURIComponent(b);content=window.encodeURIComponent(d);"linker"==a||"createLink"==a?d='<span class="prosperShort" title="'+a+("undefined"!=
d&&"undefined"!=typeof d?" "+d.replace(/"/g,""):"")+'" style="display:inline-block;text-decoration:underline;color:red;" data-sh-attr="'+a+'" data-sh-content="'+content+'" data-mce-resize="false" data-mce-placeholder="1">'+e+"</span>":(e=location.protocol+"//"+location.hostname+"/wp-content/plugins/prosperent-suite/includes/img/"+("compare"==a?"prosperInsert":a)+"Placeholder.png",d='<img class="prosperShort" width="400" height="101" title="'+a+("undefined"!==d&&"undefined"!=typeof d?" "+d.replace(/"/g,
""):"")+'" alt="'+a+("undefined"!==d&&"undefined"!=typeof d?" "+d.replace(/"/g,""):"")+'" src="'+e+'" data-sh-attr="'+a+'" data-sh-content="'+("undefined"!==content&&"undefined"!=typeof content&&null!==content?content:"")+'" data-mce-resize="false" data-mce-placeholder="1">');return d})}function k(a){return a.replace(/(<(img|span) class="prosperShort" [^>]+>(<img[^<]+|[^<\/]+)?(<\/span>)?)/g,function(a,b,d,e,f){scName=window.decodeURIComponent(jQuery(a).data("shAttr"));scContent=window.decodeURIComponent(jQuery(a).data("shContent"));
return a?"["+scName+" "+scContent+"]"+("undefined"!=e&&"undefined"!=typeof e&&null!==e?e:"")+"[/"+scName+"]":b})}a.addCommand("linker",function(b,c){a.windowManager.open({file:f+"/../views/prosperlinker/autoLink.php",width:950,height:g});a.windowManager.setParams(c)});a.addCommand("createLink",function(b,c){a.windowManager.open({file:f+"/../views/prosperlinker/createLink.php",width:950,height:110});a.windowManager.setParams(c)});a.addCommand("prosperInsert",function(b,c){a.windowManager.open({file:f+
"/../views/prosperinsert/productInsert.php",width:950,height:g});a.windowManager.setParams(c)});a.addCommand("compare",function(b,c){a.windowManager.open({file:f+"/../views/prosperinsert/productInsert.php",width:950,height:g});a.windowManager.setParams(c)});a.addCommand("contentInsert",function(b,c){a.windowManager.open({file:f+"/../views/prosperinsert/contentInsert.php",width:950,height:g});a.windowManager.setParams(c)});a.addCommand("prosper_search",function(b,c){a.windowManager.open({file:f+"/../views/prospersearch/prosperSearch.php",
width:525,height:225});a.windowManager.setParams(c)});a.addButton("prosperent",{title:"Prosperent ShortCodes",type:"splitbutton",onclick:function(){},menu:[{text:"Link Phrase/Image to a Product",onclick:function(){a.execCommand("linker","","")}},{text:"Create a Link",onclick:function(){a.execCommand("createLink","","")}},{text:"Insert Products",hidden:!prosperSuiteVars.prosperInsert,onclick:function(){a.execCommand("prosperInsert","","")}},{text:"Edit Automated ProsperInsert Products",hidden:!prosperSuiteVars.prosperInsert||
!prosperSuiteVars.contentInsert||"all"!=prosperSuiteVars.contentInsert&&prosperSuiteVars.currentScreen!=prosperSuiteVars.contentInsert,onclick:function(){a.execCommand("contentInsert","","")}},{text:"Insert a Product Search Bar",hidden:!prosperSuiteVars.prosperShop||0==prosperSuiteVars.prosperShop,onclick:function(){a.execCommand("prosper_search","","")}},{text:"Insert a Shop",hidden:"post"==prosperSuiteVars.currentScreen||!prosperSuiteVars.prosperShop||0==prosperSuiteVars.prosperShop,onclick:function(){a.execCommand("mceInsertContent",
!1,"[prosper_store][/prosper_store]")}}]});a.on("DblClick",function(b){b.target.className.indexOf("prosperShort");if(-1<b.target.className.indexOf("prosperShort")){var c=b.target.attributes["data-sh-attr"].value,c=window.decodeURIComponent(c);b=b.target.attributes["data-sh-content"].value;b=window.decodeURIComponent(b);a.execCommand(c,"",b)}});a.on("GetContent",function(a){"undefined"!=a.content&&"undefined"!=typeof a.content&&null!==a.content&&(a.content=k(a.content))});a.on("BeforeSetcontent",function(a){"undefined"!=
typeof a.content&&null!==a.content&&(a.content=h(a.content))})})})();